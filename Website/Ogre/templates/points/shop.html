{% extends 'points/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block title %} {{ block.super }} -Avatar Shop {% endblock %}
{% block body_block %}
<!--Reads in the external CSS for the shop page-->
<link rel="stylesheet" type="text/css" href="{% static 'css/shop.css' %}">

<div class="container">
    <hr>
    <h1 class="display-4 white-text"> Avatar Shop</h1>
    <hr>
    <form enctype="multipart/form-data" method="POST"> 
        {% csrf_token %}
        <input id = "id_image" type = "file" class = "" name = "image">
        <input type="submit" class= "button1" name="" value="update">
    </form>
</div>

<script type = "text/javascript">
    $('document').ready(function(){
        $('#changeAv').submit(function(event){
            event.preventDefault();
            var profile_pic = $('#check').val();
            $.ajax({
                url: '/changeAvatar/',
                type: "GET",
                dataType: 'json',
                data: {
                    profile_pic: profile_pic
                }

            }).done(function(responce){
                var status = responce.status;
                $('.alert').hide();
                if (status == '0'){
                    var message = responce.message;
                    $('#alertdiv').show();
                    $('#errmsg').text(message);
                }else{
                    var message = responce.message;
                    $('#successdiv').show();
                    $('#successmsg').text(message);
                    var delay = 2000;
                    var url = '/points/';
                    setTimeout(function(){ window.location = url; }, delay);
                }
            })
        });
    });
</script>


{% endblock %}